/*function initMap() {
  var e = { lat: -34.397, lng: 150.644 },
    t = new google.maps.Map(document.getElementById("map-canvas"), {
      zoom: 15,
      center: e,
      scrollwheel: !1,
    });
  new google.maps.Marker({ position: e, map: t });
}
function initBBSRMap() {
  var e = { lat: -34.397, lng: 150.644 },
    t = new google.maps.Map(document.getElementById("map-canvas"), {
      zoom: 15,
      center: e,
      scrollwheel: !1,
    });
  new google.maps.Marker({ position: e, map: t });
}*/
function alert_markup(e, t) {
  return (
    '<div class="alert alert-' +
    e +
    '" role="alert">' +
    t +
    '<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span>&times;</span></button></div>'
  );
}
$(document).ready(function () {
  $(".wp1").waypoint(
    function () {
      $(".wp1").addClass("animated fadeInLeft");
    },
    { offset: "75%" }
  ),
    $(".wp2").waypoint(
      function () {
        $(".wp2").addClass("animated fadeInRight");
      },
      { offset: "75%" }
    ),
    $(".wp3").waypoint(
      function () {
        $(".wp3").addClass("animated fadeInLeft");
      },
      { offset: "75%" }
    ),
    $(".wp4").waypoint(
      function () {
        $(".wp4").addClass("animated fadeInRight");
      },
      { offset: "75%" }
    ),
    $(".wp5").waypoint(
      function () {
        $(".wp5").addClass("animated fadeInLeft");
      },
      { offset: "75%" }
    ),
    $(".wp6").waypoint(
      function () {
        $(".wp6").addClass("animated fadeInRight");
      },
      { offset: "75%" }
    ),
    $(".wp7").waypoint(
      function () {
        $(".wp7").addClass("animated fadeInUp");
      },
      { offset: "75%" }
    ),
    $(".wp8").waypoint(
      function () {
        $(".wp8").addClass("animated fadeInLeft");
      },
      { offset: "75%" }
    ),
    $(".wp9").waypoint(
      function () {
        $(".wp9").addClass("animated fadeInRight");
      },
      { offset: "75%" }
    ),
    $(".flexslider").flexslider({ animation: "slide" }),
    $(".single_image").fancybox({ padding: 4 }),
    $(".fancybox").fancybox({ padding: 4, width: 1e3, height: 800 }),
    $('[data-toggle="tooltip"]').tooltip(),
    $(".nav-toggle").click(function () {
      $(this).toggleClass("active"),
        $(".header-nav").toggleClass("open"),
        event.preventDefault();
    }),
    $(".header-nav li a").click(function () {
      $(".nav-toggle").toggleClass("active"),
        $(".header-nav").toggleClass("open");
    }),
    $(function () {
      $(window).scroll(function () {
        20 <= $(window).scrollTop()
          ? ($("section.navigation").addClass("fixed"),
            $("header").css({ "border-bottom": "none", padding: "35px 0" }),
            $("header .member-actions").css({ top: "26px" }),
            $("header .navicon").css({ top: "34px" }))
          : ($("section.navigation").removeClass("fixed"),
            $("header").css({
              "border-bottom": "solid 1px rgba(255, 255, 255, 0.2)",
              padding: "50px 0",
            }),
            $("header .member-actions").css({ top: "41px" }),
            $("header .navicon").css({ top: "48px" }));
      });
    }),
    $(function () {
      $("a[href*=#]:not([href=#])").click(function () {
        if (
          location.pathname.replace(/^\//, "") ===
            this.pathname.replace(/^\//, "") &&
          location.hostname === this.hostname
        ) {
          var e = $(this.hash);
          if (
            (e = e.length ? e : $("[name=" + this.hash.slice(1) + "]")).length
          )
            return (
              $("html,body").animate({ scrollTop: e.offset().top - 90 }, 2e3),
              !1
            );
        }
      });
    });
  $(".player").YTPlayer(),
    $("#btn-show-map").click(function () {
      $("#map-content").toggleClass("toggle-map-content"),
        $("#btn-show-content").toggleClass("toggle-map-content");
    }),
    $("#btn-show-content").click(function () {
      $("#map-content").toggleClass("toggle-map-content"),
        $("#btn-show-content").toggleClass("toggle-map-content");
    });
  var r = createCalendar({
    options: { class: "", id: "" },
    data: {
      title: "Ram and Antara's Wedding",
      start: new Date("Nov 27, 2017 10:00"),
      end: new Date("Nov 29, 2017 00:00"),
      address: "ITC Fortune Park Hotel, Kolkata",
      description:
        "We can't wait to see you on our big day. For any queries or issues, please contact Mr. Amit Roy at +91 9876543210.",
    },
  });
  $("#add-to-cal").html(r),
    $("#rsvp-form").on("submit", function (e) {
      e.preventDefault();
      var t = $(this).serialize();
      $("#alert-wrapper").html(
        alert_markup(
          "info",
          "<strong>Juste une seconde!</strong> Nous sauvegardons les informations."
        )
      );
    });

  // Legal mentions bubble effect
  $("#legal-btn").on("click", function (e) {
    const btn = $(this);
    const bubble = $("<div></div>").addClass("bubble-animation");
    bubble.css({
      left: e.pageX,
      top: e.pageY,
    });
    $("body").append(bubble);
    setTimeout(function () {
      $("#legal-mentions").addClass("active");
      bubble.remove();
    }, 600);
  });
  $("#close-legal").on("click", function () {
    $("#legal-mentions").removeClass("active");
  });
  $(document).on("keyup", function (e) {
    if (e.key === "Escape") $("#legal-mentions").removeClass("active");
  });
});

//Swipper 1
var swiper = new Swiper(".swiper-cards", {
  effect: "cards",
  grabCursor: true,
  initialSlide: 3,
  loop: false,
  rotate: true,
  spaceBetween: 100,
  mousewheel: {
    invert: false,
  },
});

//Swipper 2
var swiper2 = new Swiper(".swiper-post", {
  grabCursor: true,
  mousewheel: {
    invert: false,
  },
  scrollbar: {
    el: ".swiper-scrollbar",
    draggable: true,
  },
  slidesPerView: 3,
  spaceBetween: 20,
});

var textarea = document.getElementById("myTextArea");

textarea.addEventListener(
  "input",
  function () {
    if (this.value.length > 500) {
      this.value = this.value.slice(0, 500);
    }
    this.style.height = "auto"; // Réinitialise la hauteur
    this.style.height = this.scrollHeight + "px"; // Définit la hauteur en fonction du contenu
  },
  false
);

document
  .querySelector("#phone-form")
  .addEventListener("keypress", function (evt) {
    if (
      (evt.which != 8 &&
        evt.which != 0 &&
        (evt.which < 48 || (evt.which > 57 && evt.which != 43))) ||
      this.value.length >= 12
    ) {
      evt.preventDefault();
    }
  });

//when the user clicks submit do this : window.open('mailto:test@example.com?subject=subject&body=body')
function sendEmail() {
  var name = document.getElementById("name-form").value;
  var email = document.getElementById("email-form").value;
  var number = document.getElementById("phone-form").value;
  //verify if the number containts +33 or 0
  if (number.charAt(0) == "0") {
    number = "+33" + number.substring(1);
  } else if (number.charAt(0) != "+") {
    number = "+33" + number;
  }
  var textarea = document.getElementById("myTextArea").value;
  var body =
    "Name: " +
    name +
    "\nEmail: " +
    email +
    "\nPhone Number: " +
    number +
    "\nMessage: " +
    textarea;
  // console.log('mailto:' + email + '?subject=' + name + ' -> ' + number + '&body=' + body);
  // console.log('mailto:' + encodeURIComponent(email) + '?subject=' + encodeURIComponent(name) + ' -> ' + encodeURIComponent(number) + '&body=' + encodeURIComponent(body));
  window.open(
    "mailto:" + email + "?subject=" + name + " -> " + number + "&body=" + body
  );
}

//verify when the user click submit do sendmail function
document
  .getElementById("submit-form")
  .addEventListener("click", function (evt) {
    if (
      document.getElementById("name-form").value == "" ||
      document.getElementById("email-form").value == "" ||
      document.getElementById("phone-form").value == "" ||
      document.getElementById("myTextArea").value == ""
    ) {
      evt.preventDefault();
      alert("Please fill in all the fields");
    } else {
      sendEmail();
    }
  });
